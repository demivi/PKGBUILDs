pkgname=impacket
pkgver=0_9_17.48.g4473816f
pkgrel=1
pkgdesc='A collection of Python classes for working with network protocols'
arch=('any')
url='https://github.com/CoreSecurity/impacket'
license=('custom')
depends=('python2-crypto' 'python2-flask' 'python2-ldap3' 'python2-ldapdomaindump' 'python2-pcapy' 'python2-pyasn1' 'python2-pycryptodomex' 'python2-pyopenssl')
makedepends=('python2-setuptools')
source=("$pkgname"::"git+${url}.git")
md5sums=('SKIP')

pkgver() {
  cd $pkgname
  git describe --tags | sed "s/impacket_//" | sed "s/-/./g"
}

package() {
  cd $pkgname
  python2 setup.py install --root="$pkgdir/" --optimize=1
}
