pkgname=crackmapextreme
pkgver=20200227
pkgrel=1
pkgdesc='Crack Map Exec - eXtreme edition'
arch=('any')
url='https://github.com/awsmhacks/CrackMapExtreme'
license=('custom')
depends=('impacket'
         'python-asciitable'
         'python-certifi'
         'python-colorama'
         'python-dateutil'
         'python-gevent'
         'python-netaddr'
         'python-pandas'
         'python-prompt_toolkit'
         'python-pytz'
         'python-pywinrm'
         'python-requests-ntlm'
         'python-termcolor'
         'python-wcwidth'
         'python-pypykatz'
         'python-azure-cli')
makedepends=("python-setuptools")
source=("$pkgname"::"git+${url}.git")
md5sums=('SKIP')

pkgver() {
  cd $pkgname
  git log -1 --date=short --pretty=format:%cd | sed "s/-//g"
}

build() {
  cd ${srcdir}/${pkgname}
  python setup.py build
}

package() {
  cd ${srcdir}/${pkgname}
  python setup.py install --root="$pkgdir/" --optimize=1 --skip-build
}
