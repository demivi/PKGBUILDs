pkgname='python2-ldapdomaindump'
pkgver=v0.8.7
pkgrel=1
pkgdesc='Active Directory information dumper via LDAP.'
arch=('any')
url='https://github.com/dirkjanm/ldapdomaindump'
license=('custom')
depends=('python2' 'python2-dnspython' 'python2-ldap3')
makedepends=('git' 'python2-setuptools')
source=("git+https://github.com/dirkjanm/ldapdomaindump.git")
sha1sums=('SKIP')

pkgver() {
  cd "ldapdomaindump"
  git describe --tags | sed "s/-/./g"
}

build() {
  cd "ldapdomaindump"
  python2 setup.py build
}

package() {
  cd "ldapdomaindump"
  python2 setup.py install --prefix=/usr --root="$pkgdir" --optimize=1
  find "$pkgdir" -type f -exec sed 's|/usr/bin/env python$|/usr/bin/env python2|' -i {} \;
}
